<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../css/nav-style.css">
    <link rel="stylesheet" href="./css/vocabulario.css">
    <link rel="stylesheet" href="./data/diccionario.json">
    <link
        href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&family=Playfair+Display:wght@700&display=swap"
        rel="stylesheet">
    <title>Vocabulario</title>
</head>

<body>

    <div id="navbarContainer"></div>
    <a href="/index.html" class="back-link">‚Üê Volver a inicio</a>

    <div id="app">
        <div class="container_flashcards" v-if="!loading">
            <h1 class="titulo">Flashcards</h1>

            <div class="controls">
                <select v-model="currentHSK" @change="loadDeck">
                    <option value="hsk1">HSK 1</option>
                    <option value="hsk2">HSK 2</option>
                    <option value="all">Todos los niveles</option>
                </select>

                <button @click="shuffleDeck" class="btn">Mezclar Cartas</button>
                <div class="stats">
                    <span>Cartas: {{ deck.length }} |</span>
                    <span>Acertadas: {{ stats.correct }} |</span>
                    <span>Falladas: {{ stats.wrong }}</span>
                </div>
            </div>

            <div class="flashcard-container" v-if="currentCard">

                <div class="flashcard" :class="{ 'is-flipped': isFlipped }" @click="flipCard">
                    <div class="flashcard-front">

                        <div class="hanzi">{{ currentCard.hanzi }}</div>
                        <button @click.stop="playAudio" class="audio-btn" v-if="currentCard.audio">
                            üîä
                        </button>
                    </div>
                    <div class="flashcard-back">
                        <div class="pinyin">{{ currentCard.pinyin }}</div>
                        <div class="meaning">{{ currentCard.significado }}</div>
                        <div class="hsk-level">HSK {{ currentCard.hsk.slice(3) }}</div>
                    </div>
                </div>

                <div class="card-actions" v-if="isFlipped">
                    <button @click="handleResponse(true)" class="btn correct">Acert√©</button>
                    <button @click="handleResponse(false)" class="btn wrong">Fall√©</button>
                </div>
            </div>

            <div v-else class="empty-deck">
                <p>No hay m√°s cartas para revisar ahora.</p>
                <button @click="resetDeck" class="btn">Reiniciar Mazo</button>
            </div>
        </div>

        <div v-else class="loading">
            Cargando palabras...
        </div>
    </div>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="./js/vocabulario.js"></script>
    <script src="./js/navigation.js"></script>
</body>

</html>